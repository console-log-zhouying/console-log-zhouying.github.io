---
title: HTTP headers 之 host, referer, origin
categories: 计算机基础
tags: host referer origin
---

#### 一、host

- 作用：
  - 指明了请求服务器的域名/`IP`地址和端口号
- 组成：
  - 域名+端口号
- 例子：
  - test.com:1998

如果没有给定端口号，会自动使用被请求服务的默认端口（比如请求一个`HTTP`的`URL`会自动使用80端口）

`HTTP/1.1 `的所有请求报文中必须包含一个 `Host` 头字段。如果一个 HTTP/1.1 请求缺少 `Host` 头字段或者设置了超过一个的 `Host` 头字段，一个400（`Bad Request`）状态码会被返回。

<!-- more -->

#### 二、referer

- 作用：
  - 包含了当前请求页面的来源页面的地址，即表示当前页面是通过此来源页面里的链接进入的。
- 组成：
  - 协议+域名+端口号+路径+参数（注意，不包含 `hash`值）
- 例子：
  - http://test.com:1998/home
- 在以下几种情况下，`Referer` 不会被发送：
  - 来源页面采用的协议为表示本地文件的 "`file`" 或者 "`data`" `URI`；
  - 当前请求页面采用的是非安全协议，而来源页面采用的是安全协议（`HTTPS`）；
  - 直接输入网址或通过浏览器书签访问；
  - 使用 `JavaScript` 的 `Location.href` 或者是 `Location.replace()`；
  - 使用 `html5` 中 `noreferrer`
- 注意：`post`和`get`请求头中都有
- 存在的问题：
  - 比如说在请求外部网站的时候，携带着 `url` 的很多参数信息，而这些信息实际上是隐私的，所以存在一定的隐私暴露风险。
- 用途：
  - 服务端一般使用 `Referer` 首部识别访问来源，可能会以此进行统计分析、日志记录以及缓存优化等，还有个常见的用途是图片防盗链。
  - 防盗链原理是：当用户访问网页时，`referer`就是前一个网页的`URL`；如果是图片的话，通常指的就是图片所在的网页。当浏览器向服务器发送请求时，`referer`就自动携带在`HTTP`请求头了。
    图片服务器根据这个请求头判断，如果 `referer` 不是自己的服务器，就将其拦截


#### 三、origin

- 作用：
  - 说明了请求来自于哪个站点。该字段仅指示服务器名称，并不包含任何路径信息。除了不包含路径信息，该字段与 `Referer` 首部字段相似
- 注意：
  - **该首部用于 CORS 请求或者 POST 请求**，get请求是没有的
  - 只有跨域请求（可以看到 `response` 有对应的 `header`：`Access-Control-Allow-Origin`），或者同域时发送`post`请求，才会携带`origin`请求头。
    如果浏览器不能获取请求源，那么 `origin` 满足上面情况也会携带，不过其值为`null`
- 组成：
  - 协议+域名+端口号
- 用途：
  - 用于 `CORS`: 当我们的浏览器发出跨站请求时，服务器会校验当前请求是不是来自被允许的站点。服务器就是通过 `Origin` 字段的值来进行判断。